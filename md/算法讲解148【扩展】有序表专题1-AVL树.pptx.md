<!-- Slide number: 1 -->
# AVL树
左程云
前置知识
讲解044-前缀树    有序表专题要实现的结构，在空间的使用方式上和前缀树类似

有序表专题安排
专题1：AVL树，讲解148，本节
专题2：跳表，讲解149
专题3：替罪羊树，讲解150
专题4：笛卡尔树、Treap树，讲解151
专题5：FHQ Treap树，讲解152
专题6：Splay树，讲解153

大厂笔试、算法竞赛掌握以上有序表结构足够，其他有序表结构不再讲述，面试遇到只是聊，可以自行学习
算法竞赛的同学，有序表必带模版：替罪羊树、Treep树、FHQ Treap树、Splay树
Splay树是实现Link-Cut-Tree的关键，这个结构的讲述，会在【挺难】阶段的课程里安排

<!-- Slide number: 2 -->
# AVL树
左程云
有序表
有序表可以理解为一个抽象类，实现这个抽象类的方式很多，可以用平衡树实现，或用其他结构实现
有序表中的key按序组织，并且支持和序有关的查询操作，增加或者删除某个key时，也要维护序
不管实现有序表的结构是什么，都要做到增、删、改、查，时间复杂度为O(log n)

有序表专题会讲的结构：AVL树、跳表、替罪羊树、Treap树、FHQ Treap树、Splay树

有序表专题不讲的结构：红黑树、Size Balanced Tree、B树、B+树、2-3树、2-3-4树等等

有序表专题的所有结构，采用静态数组实现，因为笔试、算法竞赛时，动态结构可能无法通过(讲解019)

工程上实现有序表结构，为了防止内存泄漏的风险，会采用动态结构的方式，动态增加、动态释放

<!-- Slide number: 3 -->
# AVL树
左程云
AVL树是理解平衡树的起点结构，也是最经典的平衡搜索二叉树

平衡性：任意子树上，左树高度和右树高度，相差不超过1

单次增、删、改、查，时间复杂度都为O(log n)

<!-- Slide number: 4 -->
# AVL树
左程云
AVL树的核心是理解以下内容：
1，静态数组实现AVL树，空间的使用方式
2，处理不同查询，有时需要多维护一些数据，value信息、词频计数信息、子树的数字总数信息等等
3，左旋和右旋操作
4，四种违规情况：LL型、LR型、RL型、RR型，每种违规情况对应的调整
5，增加节点的过程
6，删除节点的过程，其中替换节点的过程是重点

注意点：
删除某个节点后，可能LL型、LR型同时出现，按照LL型调整；可能RR型、RL型同时出现，按照RR型调整
增加或者删除节点之后，从被影响的位置开始，往上每个节点都检查，是否有违规情况
即便每步都调整，时间复杂度也就是O(log n)，其实真实发生的调整次数极少，复杂度就是走过树高而已

课上重点图解以上的内容

<!-- Slide number: 5 -->
# AVL树
左程云
题目1
AVL树的实现
实现一种结构，支持如下操作，要求单次调用的时间复杂度O(log n)
1，增加x，重复加入算多个词频
2，删除x，如果有多个，只删掉一个
3，查询x的排名，x的排名为，比x小的数的个数+1
4，查询数据中排名为x的数
5，查询x的前驱，x的前驱为，小于x的数中最大的数，不存在返回整数最小值
6，查询x的后继，x的后继为，大于x的数中最小的数，不存在返回整数最大值
所有操作的次数 <= 10^5
-10^7 <= x <= +10^7
测试链接 : https://www.luogu.com.cn/problem/P3369

<!-- Slide number: 6 -->
# AVL树
左程云
其他平衡树

红黑树
Size Balanced Tree
B树
B+树
2-3树
2-3-4树
等等很多结构

不同的结构实现有序表，各自定义的平衡性不同
每个结构为了维护各自的平衡性，找到各自的违规类型及其相应的调整逻辑
有序表专题不再讲述上述结构

<!-- Slide number: 7 -->
# AVL树
左程云
题目2
重建队列(做到最优时间复杂度)
一共n个人，每个人有(a, b)两个数据，数据a表示该人的身高
数据b表示该人的要求，站在自己左边的人中，正好有b个人的身高大于等于自己的身高
请你把n个人从左到右进行排列，要求每个人的要求都可以满足
返回其中一种排列即可，本题的数据保证一定存在这样的排列
题解中的绝大多数方法，时间复杂度O(n平方)，但是时间复杂度能做到O(n * log n)
测试链接 : https://leetcode.cn/problems/queue-reconstruction-by-height/

贪心 + 有序表改写

有序表用处很广，相关题目很多，之所以选择这道题进行讲述

是因为该题展示了，基于左旋和右旋实现的有序表，调整的时候能维护节点间的中序遍历次序